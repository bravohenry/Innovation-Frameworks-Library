import{r as x,ac as e,ba as y,bb as v,b9 as o,bc as b,bd as f}from"./index-B6Arqw47.js";import{B as k}from"./BaseInteractiveLayout-DI8tFZAT.js";import{s as I,l as p}from"./chunk-Y2AYO5NJ-CcznjawQ.js";import{t as S}from"./chunk-QESP63UR-EV8kYoS_.js";import{s as D}from"./chunk-EUS52Q2W-DpttAlIM.js";const H={factors:[{id:"political-1",dimension:"political",title:"Government Policy Changes",titleEn:"Government Policy Changes",description:"Government regulatory policy adjustments may affect business operations",descriptionEn:"Government regulatory policy adjustments may affect business operations",impact:4,direction:"threat",timeframe:"medium",probability:3},{id:"economic-1",dimension:"economic",title:"Economic Growth Slowdown",titleEn:"Economic Growth Slowdown",description:"Macroeconomic changes affect consumer purchasing power",descriptionEn:"Macroeconomic changes affect consumer purchasing power",impact:3,direction:"threat",timeframe:"short",probability:4},{id:"social-1",dimension:"social",title:"Digital Consumer Behavior",titleEn:"Digital Consumer Behavior",description:"Consumers increasingly prefer digital shopping experiences",descriptionEn:"Consumers increasingly prefer digital shopping experiences",impact:5,direction:"opportunity",timeframe:"short",probability:5},{id:"technological-1",dimension:"technological",title:"AI Technology Development",titleEn:"AI Technology Development",description:"Rapid development of AI technology creates new business opportunities",descriptionEn:"Rapid development of AI technology creates new business opportunities",impact:4,direction:"opportunity",timeframe:"medium",probability:4},{id:"legal-1",dimension:"legal",title:"Data Protection Regulations",titleEn:"Data Protection Regulations",description:"Strict data protection regulations increase compliance costs",descriptionEn:"Strict data protection regulations increase compliance costs",impact:3,direction:"threat",timeframe:"long",probability:4},{id:"environmental-1",dimension:"environmental",title:"Sustainability Requirements",titleEn:"Sustainability Requirements",description:"Growing environmental requirements from consumers and regulators",descriptionEn:"Growing environmental requirements from consumers and regulators",impact:3,direction:"opportunity",timeframe:"long",probability:4}],summary:"The analysis shows significant opportunities from digital transformation and AI development, but challenges from policy changes and economic environment.",summaryEn:"The analysis shows significant opportunities from digital transformation and AI development, but challenges from policy changes and economic environment."},g={political:{labelZh:"政治",labelEn:"Political",icon:"lucide:landmark",color:"primary"},economic:{labelZh:"经济",labelEn:"Economic",icon:"lucide:trending-up",color:"success"},social:{labelZh:"社会",labelEn:"Social",icon:"lucide:users",color:"secondary"},technological:{labelZh:"技术",labelEn:"Technological",icon:"lucide:cpu",color:"warning"},legal:{labelZh:"法律",labelEn:"Legal",icon:"lucide:scale",color:"danger"},environmental:{labelZh:"环境",labelEn:"Environmental",icon:"lucide:leaf",color:"success"}},Y=({lang:i="zh",data:j,onDataChange:E,onExport:u,readOnly:T=!1,showExportButtons:C=!0,className:A=""})=>{const[r,P]=x.useState(j||H),[d,F]=x.useState(!1),[z,L]=x.useState(null),[N,w]=x.useState(null);x.useEffect(()=>{j&&P(j)},[j]);const h=s=>{P(s),E==null||E(s)},_=s=>{const n={id:`${s}-${Date.now()}`,dimension:s,title:i==="zh"?"新因素":"New Factor",titleEn:"New Factor",description:"",descriptionEn:"",impact:3,direction:"neutral",timeframe:"medium",probability:3};h({...r,factors:[...r.factors,n]}),w(n.id)},m=(s,n)=>{h({...r,factors:r.factors.map(l=>l.id===s?{...l,...n}:l)})},R=s=>{h({...r,factors:r.factors.filter(n=>n.id!==s)})},Z=s=>{if(s==="csv"){const n=r.factors.map(l=>({Dimension:i==="en"?g[l.dimension].labelEn:g[l.dimension].labelZh,Factor:i==="en"&&l.titleEn||l.title,Description:i==="en"&&l.descriptionEn||l.description,Impact:l.impact,Direction:l.direction,Timeframe:l.timeframe,Probability:l.probability}));u==null||u(s,n)}else u==null||u(s,r)},G=s=>{switch(s){case"opportunity":return"success";case"threat":return"danger";default:return"default"}},O=s=>{switch(s){case"opportunity":return"lucide:trending-up";case"threat":return"lucide:trending-down";default:return"lucide:minus"}},M=s=>({opportunity:i==="zh"?"机遇":"Opportunity",threat:i==="zh"?"威胁":"Threat",neutral:i==="zh"?"中性":"Neutral"})[s]||s,$=s=>({short:i==="zh"?"短期":"Short-term",medium:i==="zh"?"中期":"Medium-term",long:i==="zh"?"长期":"Long-term"})[s]||s,q=s=>{const n=r.factors.filter(c=>c.dimension===s),l=n.reduce((c,V)=>c+V.impact,0)/(n.length||1),t=n.filter(c=>c.direction==="opportunity").length,a=n.filter(c=>c.direction==="threat").length;return{factors:n.length,avgImpact:Math.round(l*10)/10,opportunities:t,threats:a}},B=!T&&e.jsx(f,{size:"sm",variant:d?"solid":"flat",color:d?"primary":"default",startContent:e.jsx(o,{icon:d?"lucide:check":"lucide:edit-3"}),onPress:()=>{F(!d),w(null)},children:d?i==="zh"?"完成":"Done":i==="zh"?"编辑":"Edit"});return e.jsx(k,{title:"PESTLE分析",titleEn:"PESTLE Analysis",lang:i,onExport:Z,showExportButtons:C,controls:B,className:A,data:r,pathLabels:{chapter:i==="zh"?"第1章":"Chapter 1",subsection:i==="zh"?"1.2 行业结构":"1.2 Industry Structure"},children:e.jsxs("div",{className:"space-y-6",id:"pestle-analysis-diagram",children:[e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4",children:Object.entries(g).map(([s,n])=>{const l=q(s),t=z===s;return e.jsx(y,{isPressable:!0,className:`transition-all ${t?"ring-2 ring-primary scale-105":""}`,onPress:()=>L(t?null:s),children:e.jsxs(v,{className:"p-3 text-center",children:[e.jsx(o,{icon:n.icon,className:`text-2xl mx-auto mb-2 text-${n.color}`}),e.jsx("h5",{className:"font-semibold text-sm",children:i==="en"?n.labelEn:n.labelZh}),e.jsxs("div",{className:"text-xs text-default-500 mt-1",children:[e.jsxs("div",{children:[l.factors," ",i==="zh"?"因素":"factors"]}),e.jsxs("div",{className:"flex items-center justify-center gap-1 mt-1",children:[e.jsx(o,{icon:"lucide:trending-up",className:"text-success"}),e.jsx("span",{children:l.opportunities}),e.jsx(o,{icon:"lucide:trending-down",className:"text-danger"}),e.jsx("span",{children:l.threats})]})]})]})},s)})}),Object.entries(g).map(([s,n])=>{if(z&&z!==s)return null;const l=r.factors.filter(t=>t.dimension===s);return e.jsx(y,{children:e.jsxs(v,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(o,{icon:n.icon,className:`text-xl text-${n.color}`}),e.jsx("h4",{className:"text-lg font-semibold",children:i==="en"?n.labelEn:n.labelZh}),e.jsxs(b,{variant:"flat",size:"sm",children:[l.length," ",i==="zh"?"个因素":"factors"]})]}),d&&e.jsx(f,{size:"sm",variant:"flat",color:"primary",startContent:e.jsx(o,{icon:"lucide:plus"}),onPress:()=>_(s),children:i==="zh"?"添加因素":"Add Factor"})]}),e.jsxs("div",{className:"space-y-3",children:[l.map(t=>e.jsx(y,{className:"border",children:e.jsx(v,{className:"p-4",children:e.jsx("div",{className:"space-y-3",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsx("div",{className:"flex-1",children:N===t.id&&d?e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsx(S,{label:i==="zh"?"因素标题":"Factor Title",value:i==="en"&&t.titleEn||t.title,onChange:a=>{i==="en"?m(t.id,{titleEn:a.target.value}):m(t.id,{title:a.target.value})},minRows:1,size:"sm"}),e.jsx(S,{label:i==="zh"?"详细描述":"Description",value:i==="en"&&t.descriptionEn||t.description,onChange:a=>{i==="en"?m(t.id,{descriptionEn:a.target.value}):m(t.id,{description:a.target.value})},minRows:2,size:"sm"})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[e.jsx("div",{children:e.jsx(D,{label:i==="zh"?"影响程度":"Impact",step:1,maxValue:5,minValue:1,value:t.impact,onChange:a=>m(t.id,{impact:a}),size:"sm",marks:[{value:1,label:"1"},{value:3,label:"3"},{value:5,label:"5"}]})}),e.jsxs(I,{label:i==="zh"?"影响方向":"Direction",selectedKeys:[t.direction],onSelectionChange:a=>{const c=Array.from(a)[0];m(t.id,{direction:c})},size:"sm",children:[e.jsx(p,{children:i==="zh"?"机遇":"Opportunity"},"opportunity"),e.jsx(p,{children:i==="zh"?"威胁":"Threat"},"threat"),e.jsx(p,{children:i==="zh"?"中性":"Neutral"},"neutral")]}),e.jsxs(I,{label:i==="zh"?"时间框架":"Timeframe",selectedKeys:[t.timeframe],onSelectionChange:a=>{const c=Array.from(a)[0];m(t.id,{timeframe:c})},size:"sm",children:[e.jsx(p,{children:i==="zh"?"短期":"Short-term"},"short"),e.jsx(p,{children:i==="zh"?"中期":"Medium-term"},"medium"),e.jsx(p,{children:i==="zh"?"长期":"Long-term"},"long")]}),e.jsx("div",{children:e.jsx(D,{label:i==="zh"?"可能性":"Probability",step:1,maxValue:5,minValue:1,value:t.probability,onChange:a=>m(t.id,{probability:a}),size:"sm",marks:[{value:1,label:"1"},{value:3,label:"3"},{value:5,label:"5"}]})})]})]}):e.jsxs("div",{children:[e.jsx("h5",{className:"font-semibold text-sm mb-1",children:i==="en"&&t.titleEn||t.title}),e.jsx("p",{className:"text-xs text-default-600 mb-3",children:i==="en"&&t.descriptionEn||t.description}),e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx(b,{color:G(t.direction),variant:"flat",size:"sm",startContent:e.jsx(o,{icon:O(t.direction)}),children:M(t.direction)}),e.jsxs(b,{variant:"flat",size:"sm",children:[i==="zh"?"影响":"Impact",": ",t.impact,"/5"]}),e.jsx(b,{variant:"flat",size:"sm",children:$(t.timeframe)}),e.jsxs(b,{variant:"flat",size:"sm",children:[i==="zh"?"可能性":"Probability",": ",t.probability,"/5"]})]})]})}),d&&e.jsxs("div",{className:"flex items-center gap-2 ml-3",children:[e.jsx(f,{size:"sm",variant:"flat",isIconOnly:!0,onPress:()=>w(N===t.id?null:t.id),children:e.jsx(o,{icon:N===t.id?"lucide:check":"lucide:edit-3"})}),e.jsx(f,{size:"sm",variant:"flat",color:"danger",isIconOnly:!0,onPress:()=>R(t.id),children:e.jsx(o,{icon:"lucide:trash"})})]})]})})})},t.id)),l.length===0&&e.jsxs("div",{className:"text-center py-8 text-default-400",children:[e.jsx(o,{icon:"lucide:plus-circle",className:"text-2xl mb-2 mx-auto"}),e.jsx("p",{className:"text-sm",children:i==="zh"?'暂无因素，点击"添加因素"开始':'No factors yet, click "Add Factor" to start'})]})]})]})},s)}),d&&e.jsx(y,{children:e.jsx(v,{className:"p-4",children:e.jsx(S,{label:i==="zh"?"分析总结":"Analysis Summary",placeholder:i==="zh"?"输入PESTLE分析总结...":"Enter PESTLE analysis summary...",value:i==="en"&&r.summaryEn||r.summary,onChange:s=>{h(i==="en"?{...r,summaryEn:s.target.value}:{...r,summary:s.target.value})},minRows:3})})})]})})};export{Y as default};
