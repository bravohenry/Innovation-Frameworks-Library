import{r as x,j as e,a5 as v,a6 as y,a4 as o,a7 as b,a8 as f}from"./index-BPEI-QTe.js";import{B as q}from"./BaseInteractiveLayout-Cx_gBR8d.js";import{s as P,l as h}from"./chunk-Y2AYO5NJ-BHTikWkO.js";import{t as w}from"./chunk-QESP63UR-fFqhffAu.js";import{s as D}from"./chunk-EUS52Q2W-BAZdRIJN.js";const H={factors:[{id:"political-1",dimension:"political",title:"政府政策变化",titleEn:"Government Policy Changes",description:"政府对行业监管政策的调整可能影响业务运营",descriptionEn:"Government regulatory policy adjustments may affect business operations",impact:4,direction:"threat",timeframe:"medium",probability:3},{id:"economic-1",dimension:"economic",title:"经济增长放缓",titleEn:"Economic Growth Slowdown",description:"宏观经济环境变化影响消费者购买力",descriptionEn:"Macroeconomic changes affect consumer purchasing power",impact:3,direction:"threat",timeframe:"short",probability:4},{id:"social-1",dimension:"social",title:"消费行为数字化",titleEn:"Digital Consumer Behavior",description:"消费者越来越倾向于数字化购物体验",descriptionEn:"Consumers increasingly prefer digital shopping experiences",impact:5,direction:"opportunity",timeframe:"short",probability:5},{id:"technological-1",dimension:"technological",title:"AI技术发展",titleEn:"AI Technology Development",description:"人工智能技术的快速发展创造新的商业机会",descriptionEn:"Rapid development of AI technology creates new business opportunities",impact:4,direction:"opportunity",timeframe:"medium",probability:4},{id:"legal-1",dimension:"legal",title:"数据保护法规",titleEn:"Data Protection Regulations",description:"严格的数据保护法规增加合规成本",descriptionEn:"Strict data protection regulations increase compliance costs",impact:3,direction:"threat",timeframe:"long",probability:4},{id:"environmental-1",dimension:"environmental",title:"可持续发展需求",titleEn:"Sustainability Requirements",description:"消费者和监管机构对环保的要求不断提高",descriptionEn:"Growing environmental requirements from consumers and regulators",impact:3,direction:"opportunity",timeframe:"long",probability:4}],summary:"该分析显示数字化转型和AI技术发展带来重大机遇，但政策变化和经济环境存在挑战。",summaryEn:"The analysis shows significant opportunities from digital transformation and AI development, but challenges from policy changes and economic environment."},E={political:{labelZh:"政治",labelEn:"Political",icon:"lucide:landmark",color:"primary"},economic:{labelZh:"经济",labelEn:"Economic",icon:"lucide:trending-up",color:"success"},social:{labelZh:"社会",labelEn:"Social",icon:"lucide:users",color:"secondary"},technological:{labelZh:"技术",labelEn:"Technological",icon:"lucide:cpu",color:"warning"},legal:{labelZh:"法律",labelEn:"Legal",icon:"lucide:scale",color:"danger"},environmental:{labelZh:"环境",labelEn:"Environmental",icon:"lucide:leaf",color:"success"}},Y=({lang:i="zh",data:j,onDataChange:g,onExport:u,readOnly:T=!1,showExportButtons:F=!0,className:A=""})=>{const[r,I]=x.useState(j||H),[d,L]=x.useState(!1),[z,_]=x.useState(null),[N,S]=x.useState(null);x.useEffect(()=>{j&&I(j)},[j]);const p=s=>{I(s),g==null||g(s)},C=s=>{const l={id:`${s}-${Date.now()}`,dimension:s,title:i==="zh"?"新因素":"New Factor",titleEn:"New Factor",description:"",descriptionEn:"",impact:3,direction:"neutral",timeframe:"medium",probability:3};p({...r,factors:[...r.factors,l]}),S(l.id)},m=(s,l)=>{p({...r,factors:r.factors.map(n=>n.id===s?{...n,...l}:n)})},Z=s=>{p({...r,factors:r.factors.filter(l=>l.id!==s)})},O=s=>{if(s==="csv"){const l=r.factors.map(n=>({Dimension:i==="en"?E[n.dimension].labelEn:E[n.dimension].labelZh,Factor:i==="en"&&n.titleEn||n.title,Description:i==="en"&&n.descriptionEn||n.description,Impact:n.impact,Direction:n.direction,Timeframe:n.timeframe,Probability:n.probability}));u==null||u(s,l)}else u==null||u(s,r)},R=s=>{switch(s){case"opportunity":return"success";case"threat":return"danger";default:return"default"}},M=s=>{switch(s){case"opportunity":return"lucide:trending-up";case"threat":return"lucide:trending-down";default:return"lucide:minus"}},$=s=>({opportunity:i==="zh"?"机遇":"Opportunity",threat:i==="zh"?"威胁":"Threat",neutral:i==="zh"?"中性":"Neutral"})[s]||s,G=s=>({short:i==="zh"?"短期":"Short-term",medium:i==="zh"?"中期":"Medium-term",long:i==="zh"?"长期":"Long-term"})[s]||s,V=s=>{const l=r.factors.filter(c=>c.dimension===s),n=l.reduce((c,B)=>c+B.impact,0)/(l.length||1),t=l.filter(c=>c.direction==="opportunity").length,a=l.filter(c=>c.direction==="threat").length;return{factors:l.length,avgImpact:Math.round(n*10)/10,opportunities:t,threats:a}},k=!T&&e.jsx(f,{size:"sm",variant:d?"solid":"flat",color:d?"primary":"default",startContent:e.jsx(o,{icon:d?"lucide:check":"lucide:edit-3"}),onPress:()=>{L(!d),S(null)},children:d?i==="zh"?"完成":"Done":i==="zh"?"编辑":"Edit"});return e.jsx(q,{title:"PESTLE分析",titleEn:"PESTLE Analysis",lang:i,onExport:O,showExportButtons:F,controls:k,className:A,data:r,pathLabels:{chapter:i==="zh"?"第1章":"Chapter 1",subsection:i==="zh"?"1.2 行业结构":"1.2 Industry Structure"},children:e.jsxs("div",{className:"space-y-6",id:"pestle-analysis-diagram",children:[e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4",children:Object.entries(E).map(([s,l])=>{const n=V(s),t=z===s;return e.jsx(v,{isPressable:!0,className:`transition-all ${t?"ring-2 ring-primary scale-105":""}`,onPress:()=>_(t?null:s),children:e.jsxs(y,{className:"p-3 text-center",children:[e.jsx(o,{icon:l.icon,className:`text-2xl mx-auto mb-2 text-${l.color}`}),e.jsx("h5",{className:"font-semibold text-sm",children:i==="en"?l.labelEn:l.labelZh}),e.jsxs("div",{className:"text-xs text-default-500 mt-1",children:[e.jsxs("div",{children:[n.factors," ",i==="zh"?"因素":"factors"]}),e.jsxs("div",{className:"flex items-center justify-center gap-1 mt-1",children:[e.jsx(o,{icon:"lucide:trending-up",className:"text-success"}),e.jsx("span",{children:n.opportunities}),e.jsx(o,{icon:"lucide:trending-down",className:"text-danger"}),e.jsx("span",{children:n.threats})]})]})]})},s)})}),Object.entries(E).map(([s,l])=>{if(z&&z!==s)return null;const n=r.factors.filter(t=>t.dimension===s);return e.jsx(v,{children:e.jsxs(y,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(o,{icon:l.icon,className:`text-xl text-${l.color}`}),e.jsx("h4",{className:"text-lg font-semibold",children:i==="en"?l.labelEn:l.labelZh}),e.jsxs(b,{variant:"flat",size:"sm",children:[n.length," ",i==="zh"?"个因素":"factors"]})]}),d&&e.jsx(f,{size:"sm",variant:"flat",color:"primary",startContent:e.jsx(o,{icon:"lucide:plus"}),onPress:()=>C(s),children:i==="zh"?"添加因素":"Add Factor"})]}),e.jsxs("div",{className:"space-y-3",children:[n.map(t=>e.jsx(v,{className:"border",children:e.jsx(y,{className:"p-4",children:e.jsx("div",{className:"space-y-3",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsx("div",{className:"flex-1",children:N===t.id&&d?e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsx(w,{label:i==="zh"?"因素标题":"Factor Title",value:i==="en"&&t.titleEn||t.title,onChange:a=>{i==="en"?m(t.id,{titleEn:a.target.value}):m(t.id,{title:a.target.value})},minRows:1,size:"sm"}),e.jsx(w,{label:i==="zh"?"详细描述":"Description",value:i==="en"&&t.descriptionEn||t.description,onChange:a=>{i==="en"?m(t.id,{descriptionEn:a.target.value}):m(t.id,{description:a.target.value})},minRows:2,size:"sm"})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[e.jsx("div",{children:e.jsx(D,{label:i==="zh"?"影响程度":"Impact",step:1,maxValue:5,minValue:1,value:t.impact,onChange:a=>m(t.id,{impact:a}),size:"sm",marks:[{value:1,label:"1"},{value:3,label:"3"},{value:5,label:"5"}]})}),e.jsxs(P,{label:i==="zh"?"影响方向":"Direction",selectedKeys:[t.direction],onSelectionChange:a=>{const c=Array.from(a)[0];m(t.id,{direction:c})},size:"sm",children:[e.jsx(h,{children:i==="zh"?"机遇":"Opportunity"},"opportunity"),e.jsx(h,{children:i==="zh"?"威胁":"Threat"},"threat"),e.jsx(h,{children:i==="zh"?"中性":"Neutral"},"neutral")]}),e.jsxs(P,{label:i==="zh"?"时间框架":"Timeframe",selectedKeys:[t.timeframe],onSelectionChange:a=>{const c=Array.from(a)[0];m(t.id,{timeframe:c})},size:"sm",children:[e.jsx(h,{children:i==="zh"?"短期":"Short-term"},"short"),e.jsx(h,{children:i==="zh"?"中期":"Medium-term"},"medium"),e.jsx(h,{children:i==="zh"?"长期":"Long-term"},"long")]}),e.jsx("div",{children:e.jsx(D,{label:i==="zh"?"可能性":"Probability",step:1,maxValue:5,minValue:1,value:t.probability,onChange:a=>m(t.id,{probability:a}),size:"sm",marks:[{value:1,label:"1"},{value:3,label:"3"},{value:5,label:"5"}]})})]})]}):e.jsxs("div",{children:[e.jsx("h5",{className:"font-semibold text-sm mb-1",children:i==="en"&&t.titleEn||t.title}),e.jsx("p",{className:"text-xs text-default-600 mb-3",children:i==="en"&&t.descriptionEn||t.description}),e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx(b,{color:R(t.direction),variant:"flat",size:"sm",startContent:e.jsx(o,{icon:M(t.direction)}),children:$(t.direction)}),e.jsxs(b,{variant:"flat",size:"sm",children:[i==="zh"?"影响":"Impact",": ",t.impact,"/5"]}),e.jsx(b,{variant:"flat",size:"sm",children:G(t.timeframe)}),e.jsxs(b,{variant:"flat",size:"sm",children:[i==="zh"?"可能性":"Probability",": ",t.probability,"/5"]})]})]})}),d&&e.jsxs("div",{className:"flex items-center gap-2 ml-3",children:[e.jsx(f,{size:"sm",variant:"flat",isIconOnly:!0,onPress:()=>S(N===t.id?null:t.id),children:e.jsx(o,{icon:N===t.id?"lucide:check":"lucide:edit-3"})}),e.jsx(f,{size:"sm",variant:"flat",color:"danger",isIconOnly:!0,onPress:()=>Z(t.id),children:e.jsx(o,{icon:"lucide:trash"})})]})]})})})},t.id)),n.length===0&&e.jsxs("div",{className:"text-center py-8 text-default-400",children:[e.jsx(o,{icon:"lucide:plus-circle",className:"text-2xl mb-2 mx-auto"}),e.jsx("p",{className:"text-sm",children:i==="zh"?'暂无因素，点击"添加因素"开始':'No factors yet, click "Add Factor" to start'})]})]})]})},s)}),d&&e.jsx(v,{children:e.jsx(y,{className:"p-4",children:e.jsx(w,{label:i==="zh"?"分析总结":"Analysis Summary",placeholder:i==="zh"?"输入PESTLE分析总结...":"Enter PESTLE analysis summary...",value:i==="en"&&r.summaryEn||r.summary,onChange:s=>{p(i==="en"?{...r,summaryEn:s.target.value}:{...r,summary:s.target.value})},minRows:3})})})]})})};export{Y as default};
