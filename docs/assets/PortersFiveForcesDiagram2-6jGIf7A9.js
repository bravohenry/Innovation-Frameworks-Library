import{r as u,j as s,a5 as x,a6 as p,a7 as g,a4 as N,a8 as Z}from"./index-DrH-ngIM.js";import{B as _}from"./BaseInteractiveLayout-Do9T4axB.js";import{s as L}from"./chunk-EUS52Q2W-D8vi9G2t.js";import{t as w}from"./chunk-QESP63UR-3vdKWHRk.js";const B={forces:[{key:"rivalry",labelZh:"现有竞争者竞争",labelEn:"Competitive Rivalry",weight:3,description:"现有企业间的竞争强度",descriptionEn:"Intensity of competition among existing players",factors:["竞争者数量","产品差异化","转换成本","退出壁垒"],factorsEn:["Number of competitors","Product differentiation","Switching costs","Exit barriers"]},{key:"suppliers",labelZh:"供应商议价能力",labelEn:"Supplier Power",weight:2,description:"供应商对价格和条款的控制力",descriptionEn:"Suppliers' control over pricing and terms",factors:["供应商集中度","替代投入品","前向整合威胁","行业重要性"],factorsEn:["Supplier concentration","Substitute inputs","Forward integration threat","Industry importance"]},{key:"buyers",labelZh:"买方议价能力",labelEn:"Buyer Power",weight:4,description:"客户对价格和条款的议价能力",descriptionEn:"Customers' bargaining power over prices and terms",factors:["买方集中度","购买量","产品标准化","后向整合威胁"],factorsEn:["Buyer concentration","Purchase volume","Product standardization","Backward integration threat"]},{key:"substitutes",labelZh:"替代品威胁",labelEn:"Threat of Substitutes",weight:3,description:"替代产品或服务的威胁程度",descriptionEn:"Threat level from alternative products or services",factors:["替代品性能","价格优势","转换成本","客户偏好"],factorsEn:["Substitute performance","Price advantage","Switching costs","Customer preference"]},{key:"entrants",labelZh:"新进入者威胁",labelEn:"Threat of New Entrants",weight:2,description:"新竞争者进入市场的可能性",descriptionEn:"Likelihood of new competitors entering the market",factors:["进入壁垒","规模经济","资本需求","政府政策"],factorsEn:["Entry barriers","Economies of scale","Capital requirements","Government policy"]}],overallRating:2.8,summary:"该行业竞争激烈，买方议价能力较强，但进入壁垒相对较高。",summaryEn:"The industry is highly competitive with strong buyer power, but entry barriers are relatively high."},q=({lang:t="zh",data:m,onDataChange:f,onExport:d,readOnly:z=!1,showExportButtons:k=!0,className:S=""})=>{const[a,E]=u.useState(m||B),[i,F]=u.useState(!1),[y,P]=u.useState(null);u.useEffect(()=>{m&&E(m)},[m]);const v=e=>{E(e),f==null||f(e)},b=(e,o)=>{const r={...a,forces:a.forces.map(l=>l.key===e?{...l,...o}:l)},n=r.forces.reduce((l,c)=>l+c.weight,0)/r.forces.length;r.overallRating=Math.round(n*10)/10,v(r)},R=e=>{if(e==="csv"){const o=a.forces.map(r=>{var n;return{Force:t==="en"?r.labelEn:r.labelZh,Weight:r.weight,Description:t==="en"&&r.descriptionEn||r.description,Factors:(n=t==="en"&&r.factorsEn||r.factors)==null?void 0:n.join("; ")}});d==null||d(e,o)}else d==null||d(e,a)},j=e=>e>=4?"danger":e>=3?"warning":"success",I=e=>e>=4?t==="zh"?"高威胁":"High Threat":e>=3?t==="zh"?"中威胁":"Medium Threat":t==="zh"?"低威胁":"Low Threat",T=!z&&s.jsx(Z,{size:"sm",variant:i?"solid":"flat",color:i?"primary":"default",startContent:s.jsx(N,{icon:i?"lucide:check":"lucide:edit-3"}),onPress:()=>F(!i),children:i?t==="zh"?"完成":"Done":t==="zh"?"编辑":"Edit"});return s.jsx(_,{title:"波特五力分析",titleEn:"Porter's Five Forces Analysis",lang:t,onExport:R,showExportButtons:k,controls:T,className:S,data:a,pathLabels:{chapter:t==="zh"?"第1章":"Chapter 1",subsection:t==="zh"?"1.2 行业结构":"1.2 Industry Structure"},children:s.jsxs("div",{className:"space-y-6",children:[s.jsx(x,{className:"bg-gradient-to-r from-primary/5 to-secondary/5",children:s.jsx(p,{className:"p-4",children:s.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"text-lg font-semibold mb-2",children:t==="zh"?"整体行业吸引力":"Overall Industry Attractiveness"}),s.jsx("p",{className:"text-sm text-default-600",children:t==="en"&&a.summaryEn||a.summary})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-primary",children:a.overallRating}),s.jsx("div",{className:"text-xs text-default-500",children:t==="zh"?"平均分":"Average"})]}),s.jsx(g,{color:j(a.overallRating||0),variant:"flat",size:"sm",children:I(a.overallRating||0)})]})]})})}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:a.forces.map(e=>{var o,r,n,l;return s.jsx(x,{isPressable:i,className:`transition-all ${y===e.key?"ring-2 ring-primary":""}`,onPress:()=>i&&P(y===e.key?null:e.key),children:s.jsx(p,{className:"p-4",children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("h5",{className:"font-semibold text-sm mb-1",children:t==="en"?e.labelEn:e.labelZh}),s.jsx("p",{className:"text-xs text-default-500 line-clamp-2",children:t==="en"&&e.descriptionEn||e.description})]}),s.jsx(g,{color:j(e.weight),variant:"flat",size:"sm",className:"ml-2",children:e.weight})]}),i&&y===e.key?s.jsxs("div",{className:"space-y-3",children:[s.jsx(L,{label:t==="zh"?"威胁程度":"Threat Level",step:1,maxValue:5,minValue:1,value:e.weight,onChange:c=>b(e.key,{weight:c}),className:"max-w-md",color:j(e.weight),marks:[{value:1,label:"1"},{value:2,label:"2"},{value:3,label:"3"},{value:4,label:"4"},{value:5,label:"5"}]}),s.jsx(w,{label:t==="zh"?"关键因素":"Key Factors",placeholder:t==="zh"?"输入影响因素...":"Enter influencing factors...",value:(o=t==="en"&&e.factorsEn||e.factors)==null?void 0:o.join(`
`),onChange:c=>{const h=c.target.value.split(`
`).filter(C=>C.trim());t==="en"?b(e.key,{factorsEn:h}):b(e.key,{factors:h})},minRows:3,size:"sm"})]}):s.jsx("div",{children:s.jsxs("div",{className:"space-y-1",children:[(r=t==="en"&&e.factorsEn||e.factors)==null?void 0:r.slice(0,3).map((c,h)=>s.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[s.jsx(N,{icon:"lucide:dot",className:"text-default-400"}),s.jsx("span",{className:"text-default-600",children:c})]},h)),(((n=t==="en"&&e.factorsEn||e.factors)==null?void 0:n.length)||0)>3&&s.jsxs("div",{className:"text-xs text-default-400",children:["+",(((l=t==="en"&&e.factorsEn||e.factors)==null?void 0:l.length)||0)-3," ",t==="zh"?"更多":"more"]})]})})]})})},e.key)})}),s.jsx(x,{children:s.jsxs(p,{className:"p-6",children:[s.jsx("h4",{className:"text-lg font-semibold mb-4",children:t==="zh"?"五力雷达图":"Five Forces Radar"}),s.jsx("div",{className:"flex items-center justify-center h-64 bg-default-50 rounded-lg",children:s.jsxs("div",{className:"text-center space-y-2",children:[s.jsx(N,{icon:"lucide:radar",className:"text-4xl text-default-300 mx-auto"}),s.jsx("p",{className:"text-default-500",children:t==="zh"?"雷达图可视化":"Radar Chart Visualization"}),s.jsx("p",{className:"text-xs text-default-400",children:t==="zh"?"集成图表库后显示":"Shows when chart library integrated"})]})})]})}),i&&s.jsx(x,{children:s.jsx(p,{className:"p-4",children:s.jsx(w,{label:t==="zh"?"分析总结":"Analysis Summary",placeholder:t==="zh"?"输入行业分析总结...":"Enter industry analysis summary...",value:t==="en"&&a.summaryEn||a.summary,onChange:e=>{v(t==="en"?{...a,summaryEn:e.target.value}:{...a,summary:e.target.value})},minRows:2})})})]})})};export{q as default};
